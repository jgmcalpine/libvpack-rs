[package]
name = "vpack"
version = "0.1.0"
edition = "2021"
description = "Universal Binary Container for Ark Protocol vUTXOs"
license = "MIT"

[dependencies]
# We disable default features to avoid std/rand/recovery
bitcoin = { version = "0.32", default-features = false, features = ["serde"] } 

# We explicitly control the underlying crypto lib to ensure no-std compatibility
# and avoid linking against heavy C-libraries if possible.
secp256k1 = { version = "0.29", default-features = false, features = ["alloc"] }

# Serialization
borsh = { version = "1.3", default-features = false, features = ["derive"] }

# Parsing (Manual Safety)
byteorder = { version = "1.5", default-features = false }

# Checksum
crc32fast = { version = "1.4", default-features = false }

# Optional features
serde = { version = "1.0", default-features = false, features = ["derive", "alloc"], optional = true }
hex = { version = "0.4", default-features = false, features = ["alloc"], optional = true }

[features]
default = ["std"]
std = [
    "bitcoin/std",
    "secp256k1/std",
    "borsh/std",
    "byteorder/std",
    "crc32fast/std",
    "serde?/std",
]
alloc = ["secp256k1/alloc"]

# Enable JSON adapters (useful for converting Arkd responses)
adapter = ["dep:serde", "dep:hex", "std"]

[dev-dependencies]
borsh = { version = "1.3", features = ["derive"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
hex = "0.4" 